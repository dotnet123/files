@page
@model WebApplication1.Pages.Customer.EditModel
@{
    ViewData["Title"] = "Add";
    Layout = "~/Pages/Part/Layout1.cshtml";
}

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
    <legend>客户资料详情</legend>
</fieldset>


<div class="layui-row">
    <div class="layui-col-md5">
        <form class="layui-form layui-form-pane" asp-page-handler="Add" method="post">
            <div class="layui-form-item">
                <label class="layui-form-label">公司名称</label>
                <div class="layui-input-block">
                    <input type="hidden" name="id" value="@Model.customer.Id" >
               
                    <input type="text" name="companyname" value="@Model.customer.CompanyName" autocomplete="off" placeholder="请输入公司名称" lay-verify="required" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">公司地址</label>
                <div class="layui-input-block">
                    <input type="text" name="Address" value="@Model.customer.Address" autocomplete="off" placeholder="请输入公司地址" lay-verify="required" class="layui-input">
                </div>
            </div>


            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">公司联系人</label>
                    <div class="layui-input-block">
                        <input type="text" name="Contacts" value="@Model.customer.Contacts" autocomplete="off" class="layui-input" lay-key="2">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">联系方式</label>
                    <div class="layui-input-inline">
                        <input type="text" name="Tel" value="@Model.customer.Tel" autocomplete="off" class="layui-input">
                    </div>
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">签约金额</label>
                    <div class="layui-input-block">
                        <input type="text" name="ContractAmount" value="@Model.customer.ContractAmount" id="date100" autocomplete="off" class="layui-input" lay-key="2">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">回款</label>
                    <div class="layui-input-inline">
                        <input type="radio" name="HuiKuanStatus" 
                               @(Model.customer.HuiKuanStatus==1?"checked":"") 
                               value="1" title="是" ><div class="layui-unselect layui-form-radio layui-form-radioed"><i class="layui-anim layui-icon layui-anim-scaleSpring"></i><div>是</div></div>
                        <input type="radio" name="HuiKuanStatus" 
                               @(Model.customer.HuiKuanStatus==0?"checked":"") 
                               value="0" title="否"><div class="layui-unselect layui-form-radio"><i class="layui-anim layui-icon"></i><div>否</div></div>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">登记日期</label>
                    <div class="layui-input-block">
                        <input type="text" name="logtime" id="date1" value="@Model.customer.LogTime.ToString("yyyy-MM-dd")" autocomplete="off" class="layui-input" >
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">登记人</label>
                    <div class="layui-input-inline">
                        <input type="hidden" name="number" value="@Model.customer.UserId" autocomplete="off" class="layui-input" disabled>
                        <input type="text" name="number" value="@Model.user.Name" autocomplete="off" class="layui-input" disabled>
                    </div>
                </div>
            </div>

            <div class="layui-form-item">
                <button class="layui-btn" lay-submit="" lay-filter="demo2">@Model.btTxt</button>
                @Html.AntiForgeryToken()
            </div>
        </form>

    </div>
    <div class="layui-col-md1">
        
      
        <span class="layui-badge-dot layui-bg-orange" style="background-color:white!important"></span>
       
    </div>
    <div class="layui-col-md6">
        <div class="layui-row">
            <div class="layui-col-xs4">
                <div class="layui-inline">
                    <div class="layui-input-inline">
                        <input type="text" class="layui-input" id="test19" lay-key="1">
                        <button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
                    </div>
                </div>
            </div>
            <div class="layui-col-xs8">


                <div class="layui-input-inline">

                    <textarea placeholder="请输入内容" id="visitrecord" class="layui-textarea"></textarea>
                </div>

            </div>
        </div>
        <div class="layui-tab">
            <ul class="layui-tab-title">
                <li class="layui-this">拜访记录</li>
                <li>回款记录</li>
          
            </ul>
            <div class="layui-tab-content">
                <div class="layui-tab-item layui-show">
                    <ul class="layui-timeline">
                        <li class="layui-timeline-item">
                            <i class="layui-icon layui-timeline-axis"></i>
                            <div class="layui-timeline-content layui-text">
                                <h3 class="layui-timeline-title">8月18日</h3>
                                <p>
                                    layui 2.0 的一切准备工作似乎都已到位。发布之弦，一触即发。
                                    <br>不枉近百个日日夜夜与之为伴。因小而大，因弱而强。
                                    <br>无论它能走多远，抑或如何支撑？至少我曾倾注全心，无怨无悔 <i class="layui-icon"></i>
                                </p>
                            </div>
                        </li>
         
                        <li class="layui-timeline-item">
                            <i class="layui-icon layui-timeline-axis"></i>
                            <div class="layui-timeline-content layui-text">
                                <div class="layui-timeline-title">开始</div>
                            </div>
                        </li>
                    </ul>

               
                </div>
                <div class="layui-tab-item">
                    
                    <ul class="layui-timeline">
                        <li class="layui-timeline-item">
                            <i class="layui-icon layui-timeline-axis"></i>
                            <div class="layui-timeline-content layui-text">
                                <div class="layui-timeline-title">2018年，layui 5.0 发布。并发展成为中国最受欢迎的前端UI框架（期望）</div>
                            </div>
                        </li>
         
                    </ul>

                </div>
          
            </div>
        </div>
        

      



        
        
    </div>

</div>
<script>


    //  var index = parent.layer.getFrameIndex(window.name); //获取窗口索引


    layui.use(['form', 'layedit', 'laydate','element'], function () {

        var form = layui.form
            , layer = layui.layer
            , layedit = layui.layedit
            , laydate = layui.laydate
        ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
  
        

        //日期
        laydate.render({
            elem: '#date'
        });
        laydate.render({
            elem: '#date1'

        });
        //初始赋值
        laydate.render({
            elem: '#test19'
            , value: new Date()
        });
        var $ = layui.jquery;

        form.on('submit(demo2)', function (data) {
           // console.log(data.elem);//被执行事件的元素DOM对象，一般为button对象
           // console.log(data.form); //被执行提交的form对象，一般在存在form标签时才会返回
           // console.log(data.field); //当前容器的全部表单字段，名值对形式：{name: value}


            $.post("?handler=save", data.field,
                function (data2, state2) {

                    console.log(state2);
                    if (state2 == "success") {

                        if (data2.code == 0) {
                            

                            layer.alert(data2.msg, {
                               closeBtn: 0
                            }, function(){
                                setTimeout(function () {  window.location.href = "?customerid=@Model.customer.Id" },3);
                            });

                        } else {
                            layer.alert(data2.msg);
                        }
                    } else {

                        layer.alert(state2);
                    }
                },
                "json"
            );



            return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
        });
    });

</script>




